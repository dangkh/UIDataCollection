# -*- coding: utf-8 -*-

# Form implementation generated from reading ui file 'test02.ui'
#
# Created by: PyQt5 UI code generator 5.15.1
#
# WARNING: Any manual changes made to this file will be lost when pyuic5 is
# run again.  Do not edit this file unless you know what you are doing.


from PyQt5 import QtCore, QtGui, QtWidgets

from matplotlib.backends.backend_qt5agg import FigureCanvasQTAgg, NavigationToolbar2QT as NavigationToolbar
from matplotlib.figure import Figure
import sys
import matplotlib
import matplotlib.pyplot as plt

class Ui_Form(object):
    def setupUi(self, Form):
        Form.setObjectName("Form")
        Form.resize(502, 560)
        icon = QtGui.QIcon()
        icon.addPixmap(QtGui.QPixmap("my-beautiful-life-logo-3.png"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        Form.setWindowIcon(icon)
        self.label = QtWidgets.QLabel(Form)
        self.label.setGeometry(QtCore.QRect(40, 10, 181, 31))
        font = QtGui.QFont()
        font.setPointSize(14)
        font.setBold(True)
        font.setWeight(75)
        self.label.setFont(font)
        self.label.setObjectName("label")
        self.groupBox = QtWidgets.QGroupBox(Form)
        self.groupBox.setGeometry(QtCore.QRect(40, 110, 391, 391))
        self.groupBox.setTitle("")
        self.groupBox.setObjectName("groupBox")
        self.label_2 = QtWidgets.QLabel(self.groupBox)
        self.label_2.setGeometry(QtCore.QRect(140, 0, 121, 21))
        font = QtGui.QFont()
        font.setPointSize(11)
        font.setBold(True)
        font.setWeight(75)
        self.label_2.setFont(font)
        self.label_2.setObjectName("label_2")
        self.formLayoutWidget = QtWidgets.QWidget(self.groupBox)
        self.formLayoutWidget.setGeometry(QtCore.QRect(50, 30, 301, 341))
        self.formLayoutWidget.setObjectName("formLayoutWidget")
        self.formLayout = QtWidgets.QFormLayout(self.formLayoutWidget)
        self.formLayout.setContentsMargins(0, 0, 0, 0)
        self.formLayout.setObjectName("formLayout")
        self.label_4 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_4.setObjectName("label_4")
        self.formLayout.setWidget(0, QtWidgets.QFormLayout.LabelRole, self.label_4)
        self.NameEdit = QtWidgets.QLineEdit(self.formLayoutWidget)
        self.NameEdit.setObjectName("NameEdit")
        self.formLayout.setWidget(0, QtWidgets.QFormLayout.FieldRole, self.NameEdit)
        self.label_5 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_5.setObjectName("label_5")
        self.formLayout.setWidget(1, QtWidgets.QFormLayout.LabelRole, self.label_5)
        self.AgeEdit = QtWidgets.QSpinBox(self.formLayoutWidget)
        self.AgeEdit.setObjectName("AgeEdit")
        self.formLayout.setWidget(1, QtWidgets.QFormLayout.FieldRole, self.AgeEdit)
        self.label_6 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_6.setObjectName("label_6")
        self.formLayout.setWidget(2, QtWidgets.QFormLayout.LabelRole, self.label_6)
        self.horizontalLayout_2 = QtWidgets.QHBoxLayout()
        self.horizontalLayout_2.setObjectName("horizontalLayout_2")
        self.MaleEdit = QtWidgets.QRadioButton(self.formLayoutWidget)
        self.MaleEdit.setObjectName("MaleEdit")
        self.horizontalLayout_2.addWidget(self.MaleEdit)
        self.FemaleEdit = QtWidgets.QRadioButton(self.formLayoutWidget)
        self.FemaleEdit.setObjectName("FemaleEdit")
        self.horizontalLayout_2.addWidget(self.FemaleEdit)
        self.formLayout.setLayout(2, QtWidgets.QFormLayout.FieldRole, self.horizontalLayout_2)
        self.DiseaseDescEdit = QtWidgets.QTextEdit(self.formLayoutWidget)
        self.DiseaseDescEdit.setObjectName("DiseaseDescEdit")
        self.formLayout.setWidget(3, QtWidgets.QFormLayout.FieldRole, self.DiseaseDescEdit)
        spacerItem = QtWidgets.QSpacerItem(20, 89, QtWidgets.QSizePolicy.Minimum, QtWidgets.QSizePolicy.Expanding)
        self.formLayout.setItem(4, QtWidgets.QFormLayout.FieldRole, spacerItem)
        self.label_8 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_8.setObjectName("label_8")
        self.formLayout.setWidget(5, QtWidgets.QFormLayout.LabelRole, self.label_8)
        self.RecorderEdit = QtWidgets.QLineEdit(self.formLayoutWidget)
        self.RecorderEdit.setObjectName("RecorderEdit")
        self.formLayout.setWidget(5, QtWidgets.QFormLayout.FieldRole, self.RecorderEdit)
        self.label_9 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_9.setObjectName("label_9")
        self.formLayout.setWidget(6, QtWidgets.QFormLayout.LabelRole, self.label_9)
        self.LocateEdit = QtWidgets.QLineEdit(self.formLayoutWidget)
        self.LocateEdit.setObjectName("LocateEdit")
        self.formLayout.setWidget(6, QtWidgets.QFormLayout.FieldRole, self.LocateEdit)
        self.label_10 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_10.setObjectName("label_10")
        self.formLayout.setWidget(7, QtWidgets.QFormLayout.LabelRole, self.label_10)
        self.RecPlanEdit = QtWidgets.QSpinBox(self.formLayoutWidget)
        self.RecPlanEdit.setObjectName("RecPlanEdit")
        self.formLayout.setWidget(7, QtWidgets.QFormLayout.FieldRole, self.RecPlanEdit)
        self.label_11 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_11.setObjectName("label_11")
        self.formLayout.setWidget(8, QtWidgets.QFormLayout.LabelRole, self.label_11)
        self.dateTimeEdit = QtWidgets.QDateTimeEdit(self.formLayoutWidget)
        self.dateTimeEdit.setObjectName("dateTimeEdit")
        self.formLayout.setWidget(8, QtWidgets.QFormLayout.FieldRole, self.dateTimeEdit)
        self.label_7 = QtWidgets.QLabel(self.formLayoutWidget)
        self.label_7.setObjectName("label_7")
        self.formLayout.setWidget(3, QtWidgets.QFormLayout.LabelRole, self.label_7)
        self.LoadBtn = QtWidgets.QPushButton(Form)
        self.LoadBtn.setGeometry(QtCore.QRect(200, 510, 75, 23))
        self.LoadBtn.setObjectName("LoadBtn")
        self.SaveBtn = QtWidgets.QPushButton(Form)
        self.SaveBtn.setGeometry(QtCore.QRect(770, 470, 75, 23))
        self.SaveBtn.setObjectName("SaveBtn")
        self.ET_Gif = QtWidgets.QLabel(Form)
        self.ET_Gif.setGeometry(QtCore.QRect(580, 110, 221, 141))
        self.ET_Gif.setStyleSheet("background-color: rgb(203, 0, 0);")
        self.ET_Gif.setText("")
        self.ET_Gif.setObjectName("ET_Gif")
        self.EEG_Gif = QtWidgets.QLabel(Form)
        self.EEG_Gif.setGeometry(QtCore.QRect(820, 110, 221, 141))
        self.EEG_Gif.setStyleSheet("background-color: rgb(0, 117, 234);")
        self.EEG_Gif.setText("")
        self.EEG_Gif.setObjectName("EEG_Gif")
        self.verticalLayoutWidget = QtWidgets.QWidget(Form)
        self.verticalLayoutWidget.setGeometry(QtCore.QRect(580, 260, 221, 171))
        self.verticalLayoutWidget.setObjectName("verticalLayoutWidget")
        self.ET2 = QtWidgets.QVBoxLayout(self.verticalLayoutWidget)
        self.ET2.setContentsMargins(0, 0, 0, 0)
        self.ET2.setObjectName("ET2")
        self.gridLayoutWidget = QtWidgets.QWidget(Form)
        self.gridLayoutWidget.setGeometry(QtCore.QRect(10, 40, 481, 56))
        self.gridLayoutWidget.setObjectName("gridLayoutWidget")
        self.gridLayout_2 = QtWidgets.QGridLayout(self.gridLayoutWidget)
        self.gridLayout_2.setContentsMargins(0, 0, 0, 0)
        self.gridLayout_2.setObjectName("gridLayout_2")
        self.Signal1 = QtWidgets.QToolButton(self.gridLayoutWidget)
        self.Signal1.setEnabled(False)
        self.Signal1.setStyleSheet("background-color: rgba(255,255,255,0);border: 0px;")
        self.Signal1.setText("")
        icon1 = QtGui.QIcon()
        icon1.addPixmap(QtGui.QPixmap("redBtn.jpg"), QtGui.QIcon.Normal, QtGui.QIcon.Off)
        icon1.addPixmap(QtGui.QPixmap("greenbt2.png"), QtGui.QIcon.Normal, QtGui.QIcon.On)
        icon1.addPixmap(QtGui.QPixmap("greenbt2.png"), QtGui.QIcon.Disabled, QtGui.QIcon.Off)
        icon1.addPixmap(QtGui.QPixmap("redBtn.jpg"), QtGui.QIcon.Disabled, QtGui.QIcon.On)
        icon1.addPixmap(QtGui.QPixmap("redBtn.jpg"), QtGui.QIcon.Selected, QtGui.QIcon.Off)
        self.Signal1.setIcon(icon1)
        self.Signal1.setCheckable(True)
        self.Signal1.setChecked(True)
        self.Signal1.setObjectName("Signal1")
        self.gridLayout_2.addWidget(self.Signal1, 1, 0, 1, 1, QtCore.Qt.AlignHCenter)
        self.label_12 = QtWidgets.QLabel(self.gridLayoutWidget)
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        self.label_12.setFont(font)
        self.label_12.setObjectName("label_12")
        self.gridLayout_2.addWidget(self.label_12, 0, 3, 1, 1, QtCore.Qt.AlignHCenter)
        self.Signal4 = QtWidgets.QToolButton(self.gridLayoutWidget)
        self.Signal4.setEnabled(False)
        self.Signal4.setStyleSheet("background-color: rgba(255,255,255,0);border: 0px;")
        self.Signal4.setText("")
        self.Signal4.setIcon(icon1)
        self.Signal4.setCheckable(True)
        self.Signal4.setChecked(True)
        self.Signal4.setObjectName("Signal4")
        self.gridLayout_2.addWidget(self.Signal4, 1, 3, 1, 1, QtCore.Qt.AlignHCenter)
        self.Signal2 = QtWidgets.QToolButton(self.gridLayoutWidget)
        self.Signal2.setEnabled(False)
        self.Signal2.setStyleSheet("background-color: rgba(255,255,255,0);border: 0px;")
        self.Signal2.setText("")
        self.Signal2.setIcon(icon1)
        self.Signal2.setCheckable(True)
        self.Signal2.setChecked(True)
        self.Signal2.setObjectName("Signal2")
        self.gridLayout_2.addWidget(self.Signal2, 1, 1, 1, 1, QtCore.Qt.AlignHCenter)
        self.Signal3 = QtWidgets.QToolButton(self.gridLayoutWidget)
        self.Signal3.setEnabled(False)
        self.Signal3.setStyleSheet("background-color: rgba(255,255,255,0);border: 0px;")
        self.Signal3.setText("")
        self.Signal3.setIcon(icon1)
        self.Signal3.setCheckable(True)
        self.Signal3.setChecked(True)
        self.Signal3.setObjectName("Signal3")
        self.gridLayout_2.addWidget(self.Signal3, 1, 2, 1, 1, QtCore.Qt.AlignHCenter)
        self.label_3 = QtWidgets.QLabel(self.gridLayoutWidget)
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        self.label_3.setFont(font)
        self.label_3.setObjectName("label_3")
        self.gridLayout_2.addWidget(self.label_3, 0, 0, 1, 1, QtCore.Qt.AlignHCenter)
        self.label_13 = QtWidgets.QLabel(self.gridLayoutWidget)
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        self.label_13.setFont(font)
        self.label_13.setObjectName("label_13")
        self.gridLayout_2.addWidget(self.label_13, 0, 1, 1, 1, QtCore.Qt.AlignHCenter)
        self.label_14 = QtWidgets.QLabel(self.gridLayoutWidget)
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        self.label_14.setFont(font)
        self.label_14.setObjectName("label_14")
        self.gridLayout_2.addWidget(self.label_14, 0, 4, 1, 1, QtCore.Qt.AlignHCenter)
        self.label_15 = QtWidgets.QLabel(self.gridLayoutWidget)
        font = QtGui.QFont()
        font.setBold(True)
        font.setWeight(75)
        self.label_15.setFont(font)
        self.label_15.setObjectName("label_15")
        self.gridLayout_2.addWidget(self.label_15, 0, 2, 1, 1, QtCore.Qt.AlignHCenter)
        self.Signal5 = QtWidgets.QToolButton(self.gridLayoutWidget)
        self.Signal5.setEnabled(False)
        self.Signal5.setStyleSheet("background-color: rgba(255,255,255,0);border: 0px;")
        self.Signal5.setText("")
        self.Signal5.setIcon(icon1)
        self.Signal5.setCheckable(True)
        self.Signal5.setChecked(True)
        self.Signal5.setObjectName("Signal5")
        self.gridLayout_2.addWidget(self.Signal5, 1, 4, 1, 1, QtCore.Qt.AlignHCenter)
        self.frame = QtWidgets.QFrame(Form)
        self.frame.setGeometry(QtCore.QRect(10, 41, 481, 31))
        self.frame.setStyleSheet("background-color: rgb(176, 176, 176);")
        self.frame.setFrameShape(QtWidgets.QFrame.StyledPanel)
        self.frame.setFrameShadow(QtWidgets.QFrame.Raised)
        self.frame.setObjectName("frame")
        self.verticalLayoutWidget_2 = QtWidgets.QWidget(Form)
        self.verticalLayoutWidget_2.setGeometry(QtCore.QRect(820, 260, 221, 171))
        self.verticalLayoutWidget_2.setObjectName("verticalLayoutWidget_2")
        self.ET2_2 = QtWidgets.QVBoxLayout(self.verticalLayoutWidget_2)
        self.ET2_2.setContentsMargins(0, 0, 0, 0)
        self.ET2_2.setObjectName("ET2_2")
        self.frame.raise_()
        self.label.raise_()
        self.groupBox.raise_()
        self.LoadBtn.raise_()
        self.SaveBtn.raise_()
        self.ET_Gif.raise_()
        self.EEG_Gif.raise_()
        self.verticalLayoutWidget.raise_()
        self.gridLayoutWidget.raise_()
        self.verticalLayoutWidget_2.raise_()

        self.retranslateUi(Form)
        QtCore.QMetaObject.connectSlotsByName(Form)
        self.canvas = None

    def retranslateUi(self, Form):
        _translate = QtCore.QCoreApplication.translate
        Form.setWindowTitle(_translate("Form", "Form"))
        self.label.setText(_translate("Form", "Thêm mới bản ghi"))
        self.label_2.setText(_translate("Form", "Dữ liệu bản ghi"))
        self.label_4.setText(_translate("Form", "Họ tên người bệnh"))
        self.label_5.setText(_translate("Form", "Tuổi"))
        self.label_6.setText(_translate("Form", "Giới tính"))
        self.MaleEdit.setText(_translate("Form", "Nam"))
        self.FemaleEdit.setText(_translate("Form", "Nữ"))
        self.label_8.setText(_translate("Form", "Người thực hiện thu"))
        self.label_9.setText(_translate("Form", "Địa điểm"))
        self.label_10.setText(_translate("Form", "Kịch bản"))
        self.label_11.setText(_translate("Form", "Thời gian"))
        self.label_7.setText(_translate("Form", "Mô tả bệnh"))
        self.LoadBtn.setText(_translate("Form", "Load"))
        self.SaveBtn.setText(_translate("Form", "Lưu"))
        self.label_12.setText(_translate("Form", "CAM1"))
        self.label_3.setText(_translate("Form", "Máy thu tín hiệu"))
        self.label_13.setText(_translate("Form", "ET"))
        self.label_14.setText(_translate("Form", "CAM1"))
        self.label_15.setText(_translate("Form", "EEG"))



    def extendSize(self, Form):
            Form.resize(1200, 560)

    def addGif(self, Form):
        self.ETmovie = QtGui.QMovie("test.gif")
        self.ET_Gif.setMovie(self.ETmovie)
        rect = self.ET_Gif.geometry()
        size = QtCore.QSize(max(rect.width(), rect.height()), min(rect.width(), rect.height()))
        self.ETmovie.setScaledSize(size)
        self.ETmovie.start()

        self.EEGmovie = QtGui.QMovie("testgif_2.gif")
        self.EEG_Gif.setMovie(self.EEGmovie)
        rect = self.EEG_Gif.geometry()
        size = QtCore.QSize(max(rect.width(), rect.height()), min(rect.width(), rect.height()))
        self.EEGmovie.setScaledSize(size)
        self.EEGmovie.start()


        self.fig = Figure(figsize=(5, 4), dpi=100)
        if self.canvas is None:
            self.canvas = FigureCanvasQTAgg(self.fig)
        else:
            self.canvas.setParent(None)
            self.canvas = FigureCanvasQTAgg(self.fig)
        self.ET2.addWidget(self.canvas)
        self.numChanel = 3
        self.currentCounter = 0
        self.listAx  = [self.fig.add_subplot(self.numChanel,1, x+1) for x in range(self.numChanel)]
        xdata = (range(300))
        for ch, ax in enumerate(self.listAx):
            # ax.plot(xdata, self.EEG[ch,:self.currentCounter * 10 + 300], 'r', lw=1)
            ax.axes.xaxis.set_visible(False)
            ax.axes.yaxis.set_visible(False)

        self.drawStatus = False
        self.referAx = []
        self.updatePlot()


        self.timer = QtCore.QTimer()
        self.timer.setInterval(100)
        self.timer.timeout.connect(self.updatePlot)
        self.timer.start()

    def centerUI(self, Form):        
        frameGm = Form.frameGeometry()
        centerP = QtWidgets.QDesktopWidget().availableGeometry().topLeft()
        frameGm.moveCenter(centerP)
        Form.move(frameGm.center())

    def loadData(self, EEG):
        self.EEG = EEG

    def updatePlot(self):
        currentData = self.EEG[0:self.numChanel,self.currentCounter * 10 :self.currentCounter * 10 + 300]
        xdata = (range(300))
        self.currentCounter += 1
        if self.drawStatus == False:
            for ch, ax in enumerate(self.listAx):
                line, = ax.plot(xdata, currentData[ch,:], 'r', lw=1)
                self.referAx.append(line)
            self.drawStatus = True
        else:
            for ch, ax in enumerate(self.listAx):
                currentAx = self.referAx[ch]
                currentAx.set_ydata(currentData[ch,:])
        self.canvas.draw()

